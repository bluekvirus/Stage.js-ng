# Stage.js Next Generation
Build tool for single page web applications. Framework independent, although the tool comes with an init command which will 
generate the project structure used in the default config file. 
## Usage
### 1. Download this tool from github (In the future will be on npm, directions vary):
```
git clone https://github.com/ch3riee/Stage.js-ng.git .
```
Don't forget the `.` in the end.

Then make sure you checkout this current branch (will be merged in the future)

```
git checkout ES6-v2.0
```

### 2. Initialize it by going into the tool root directory you just downloaded:
```
npm install
```
### 3. Create your project directory via init command (optional)
Create an empty root folder for your project anywhere you would like.
Then run the init command to obtain empty default project structure
EXAMPLE
```
mkdir myproject
cd myproject
node <relative path to cli.js inside tool root directory> init 
```
The init command will also automatically run npm install on the package.json file included.
NOTE: If you are using your own project structure make sure you locally have gulp, forever-monitor, and http-server. 
### 4. COMMANDS
Should be run from inside your project directory. Just make sure you pass the right path to run for cli.js.
Will be changed once this tool is uploaded to NPM.
INIT: Initialize empty folder structure and install gulp, forever-monitor, http-server:
```
node <path to cli.js> init

```
BUILD: process which will clean the output folder (described in config file), bundle/watch js via webpack, concat js if needed, 
copy assets/icons/fonts into output folder, and combine/compile less files into main.css.
```
node <path to cli.js> build
```
CLEAN: cleans out the output folder
```
node <path to cli.js> clean
```
JS: bundles/concats js as well as watches the bundled javascript
```
node <path to cli.js> js
```
MIN: minifies all html, css, js inside of output folder. Or can specify --html, --js, --css to only minify certain types of files.
```
node <path to cli.js> min [--html, --js, --css]
```
LESS: uses config file's stylesheet entrypoint or default main.less file to combine/compile less into main.css (placed in output folder)
```
node <path to cli.js> less
```
TPL: combines all templates into a all.json file where each key is the template name, and value is the template html itself as a string.
```
node <path to cli.js> tpl
```
ICON: **please make sure to call this on your own prior to less command.**
Will generate iconfonts, sprite.png, and icon.less file.
In addition a demo.html file will also be created inside your src icon folder (passed in to config file) and can be used as reference.
**icon.less will be auto-included into the main.css file and compiled inside of the less command.**
```
node <path to cli.js> icon
```
ASSETS: copies assets into output folder. By default the sprite.img & font folder (generated by icon command), along with
index.html file will be copied. **As the default is based off of the default project structure, please make sure you include any
other assets you need copied (or if you renamed your font folder etc).**
```
node <path to cli.js> assets
```
SERVE: will serve your output folder statically using http-server. Utilizes forever-monitor to serve, as well as watch js via webpack,
and watch less files (config in watch section via glob).
```
node <path to cli.js> serve
```
### 5. COMMAND OPTIONS
--config: You can also pass -C, --config <path to user config file> in order to switch to a different build configuration. Must be 
used for each command. The default search path for the user config file is within the project directory that calls this tool: `[cwd]/config.js`
If it is not found, and the user has not provided some alternate path via -C, --config, the default config file shipped with this 
tool will be used.
```
node <path to cli.js> serve -C <path to config file>
```
--root: You can also pass -R, --root <path to project root directory> in order to specify the root directory of your project. By
default this will be your calling directory of this tool. If you choose to pass some other directory, must use -R,--root for 
each command. **Most likely will not need to use this as calling directory should typically be the project root directory**
```
node <path to cli.js> clean -R <path to project root>
```
### CONFIGURATION
Please check out the default.js config file shipped with this tool for an example of how to structure your config file.
Please do not add/change the plugins section to your user config file as this may cause errors. 
NOTE: If both the user config file and the default config file have the same key, the user config file will win out. 
However, inside of the assets section of the config files, the user config will always be concatenated to the default
config.

**By not providing a user defined config file, this means that you are using the init default project structure**

## KEY THINGS TO REMEMBER
1) Project root directory must have gulp, http-server, and forever-monitor locally installed, if not using init cmd.
EXAMPLE:
```
npm install --save-dev http-server
```
2) There is a default config file that will be merged with the user's config file (if provided). If the path to this
user config file is not [calling directory]/config.js , please make sure to use the --config,-C option for each command called.

3) If the path to the calling directory of this tool, is not the root directory of your project, please use the --root,-R option
for each command called.


## License
The [MIT](LICENSE) license.
